<div class="flex modal-header text-center">
    <h5>{{label}} Farmer</h5>
    <div class="close-modal" (click)="close()">
        <i class="fa fa-close" style="cursor: pointer;"></i>
    </div>
</div>
<div class="modal-body">
    <form [formGroup]="farmerForm" (ngSubmit)="submit($event,farmerForm.value)">
        <div class="row">
            <div class="col-md-3 mb-2">
                <label class="form-label">Village</label>
                <ngx-select-dropdown 
                [config]="config" 
                [options]="villageList" formControlName="village">
              </ngx-select-dropdown>
              @if (farmerForm.get('village')?.invalid && (farmerForm.get('village')?.dirty || farmerForm.get('village')?.touched)) {
                <span class="text-danger mt-2">
                  Village is Required
                </span>
              }
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Farmer Name</label>
                <input type="text" class="form-control" formControlName="name"
                    placeholder="Enter Farmer Name" /> 
                    @if(farmerForm.get('name')?.invalid && (farmerForm.get('name')?.dirty || farmerForm.get('name')?.touched)) {
                      <span class="text-danger mt-2">
                        Farmer Name is Required
                      </span>
                    }
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Relation</label>
                <select class="form-control" formControlName="relation">
                    @for(value of relationData; track value) {
                        <option [ngValue]="value.value">{{ value.text }}</option>
                    }
                </select>
                @if(farmerForm.get('relation')?.invalid && (farmerForm.get('relation')?.dirty || farmerForm.get('relation')?.touched)) {
                  <span class="text-danger mt-2">
                    Relation is Required
                  </span>
                }
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Relation Name</label>
                <input type="text" class="form-control" formControlName="relationName"
                    placeholder="Enter Relation Name" /> 
                    @if(farmerForm.get('relationName')?.invalid && (farmerForm.get('relationName')?.dirty || farmerForm.get('relationName')?.touched)) {
                      <span class="text-danger mt-2">
                        Relation Name is Required
                      </span>
                    }
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Phone No.</label>
                <input type="number" class="form-control" formControlName="mobile"
                    placeholder="Enter Phone No." /> 
                @if(farmerForm.get('mobile')?.errors?.['required'] && (farmerForm.get('mobile')?.dirty || farmerForm.get('mobile')?.touched)) {
                    <span class="text-danger mt-2">
                        Phone No. is Required
                    </span>
                }
                @if(farmerForm.get('mobile')?.errors?.['pattern'] && (farmerForm.get('mobile')?.dirty || farmerForm.get('mobile')?.touched)) {
                    <span class="text-danger mt-2">
                        Phone No. must be a 10-digit number
                    </span>
                }
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Registration Date</label>
                <input type="date" class="form-control" formControlName="registration_date" />
                @if (farmerForm.get('registration_date')?.invalid && (farmerForm.get('registration_date')?.dirty || farmerForm.get('registration_date')?.touched)) {
                    <span class="text-danger mt-2">
                        Registration Date is Required
                    </span>
                  }
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Address</label>
                <input type="text" class="form-control" formControlName="address"
                    placeholder="Enter Address" /> 
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Status</label>
                <select class="form-control" formControlName="status">
                    @for(value of status; track value) {
                    <option [ngValue]="value.id">{{ value.value }}</option>
                    }
                </select>
                @if(farmerForm.get('status')?.invalid &&
                (farmerForm.get('status')?.dirty || farmerForm.get('status')?.touched)) {
                <span class="text-danger mt-2">Status is Required</span>
                }
            </div>
        </div>
        <div class="footer">
            <div class="button-container">
                <button class="btn btn-success" type="submit">Submit</button>
                <button class="btn btn-danger" type="button" (click)="close()">Cancel</button>
            </div>
        </div>
    </form>
</div>